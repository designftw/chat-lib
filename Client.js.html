<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Adding favicon -->
    

    <!-- Adding meta -->
    

    <!-- Adding external script-->
    

    <!-- Adding external style-->
    

    <!-- Adding scripts-->
    

    <!-- Adding style-->
    

    <!-- Adding overlay script-->
    

    <!-- Adding overlay style-->
    


    <title>
      Client.js
    </title>

    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/third-party/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/third-party/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/reset.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-base.css">
    <link type="text/css" rel="stylesheet" href="styles/clean-jsdoc-theme-light.css">
    
    <svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
    style="display:none">
    <defs>
        <symbol id="copy-icon" viewbox="0 0 488.3 488.3">
            <g>
                <path
                    d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z" />
                <path
                    d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z" />
            </g>
        </symbol>
        <symbol id='search-icon' viewBox="0 0 512 512">
            <g>
                <g>
                    <path
                        d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z" />
                </g>
            </g>
            <g>
                <g>
                    <path
                        d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z" />
                </g>
            </g>
        </symbol>
        <symbol id="down-icon" viewBox="0 0 16 16">
            <path 
                fill-rule="evenodd" 
                clip-rule="evenodd" 
                d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"
            >
            </path>
        </symbol>
    </defs>
</svg>
  </head>

  <body>

    <nav class="navbar" id="navbar">
      <div class="navbar-heading" id="navbar-heading"><a href="index.html"><h2 class="navbar-heading-text">Home</h2></a></div><div class="search-box" id="search-box"><div class="search-box-input-container"><input class="search-box-input" type="text" placeholder="Search..." id="search-box-input" /><svg class="search-icon" alt="search-icon"><use xlink:href="#search-icon"></use></svg></div><div class="search-item-container" id="search-item-container"><ul class="search-item-ul" id="search-item-ul"></ul></div></div><div class="sidebar-main-content" id="sidebar-main-content"><div class="accordion collapsed" id="6656934" > <h3 class="accordion-heading">Classes<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="Account.html">Account</a></li><li class="accordion-list" id=""><a href="Alias.html">Alias</a></li><li class="accordion collapsed child" id=5081439><div class="accordion-heading child"><a href="AuthEndpoint.html">AuthEndpoint</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="AuthEndpoint.html#isLoggedIn">isLoggedIn</a></li><li data-type='method'><a href="AuthEndpoint.html#login">login</a></li><li data-type='method'><a href="AuthEndpoint.html#logout">logout</a></li><li data-type='method'><a href="AuthEndpoint.html#signup">signup</a></li></ul></li><li class="accordion-list" id=""><a href="BaseModel.html">BaseModel</a></li><li class="accordion collapsed child" id=9453757><div class="accordion-heading child"><a href="Client.html">Client</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="Client.html#addFriend">addFriend</a></li><li data-type='method'><a href="Client.html#createAlias">createAlias</a></li><li data-type='method'><a href="Client.html#createPrivatePayload">createPrivatePayload</a></li><li data-type='method'><a href="Client.html#deleteAlias">deleteAlias</a></li><li data-type='method'><a href="Client.html#deleteMessage">deleteMessage</a></li><li data-type='method'><a href="Client.html#deletePrivatePayload">deletePrivatePayload</a></li><li data-type='method'><a href="Client.html#getAlias">getAlias</a></li><li data-type='method'><a href="Client.html#getAliasesForAccount">getAliasesForAccount</a></li><li data-type='method'><a href="Client.html#getFriendsForAlias">getFriendsForAlias</a></li><li data-type='method'><a href="Client.html#getMessageById">getMessageById</a></li><li data-type='method'><a href="Client.html#getMessagesForAlias">getMessagesForAlias</a></li><li data-type='method'><a href="Client.html#getPrivatePayload">getPrivatePayload</a></li><li data-type='method'><a href="Client.html#groupMessagesByUniqueRecipients">groupMessagesByUniqueRecipients</a></li><li data-type='method'><a href="Client.html#isLoggedIn">isLoggedIn</a></li><li data-type='method'><a href="Client.html#login">login</a></li><li data-type='method'><a href="Client.html#logout">logout</a></li><li data-type='method'><a href="Client.html#removeFriend">removeFriend</a></li><li data-type='method'><a href="Client.html#sendMessage">sendMessage</a></li><li data-type='method'><a href="Client.html#signup">signup</a></li><li data-type='method'><a href="Client.html#updateAlias">updateAlias</a></li><li data-type='method'><a href="Client.html#updateMessage">updateMessage</a></li><li data-type='method'><a href="Client.html#updatePrivatePayload">updatePrivatePayload</a></li></ul></li><li class="accordion-list" id=""><a href="ClientStore.html">ClientStore</a></li><li class="accordion collapsed child" id=3393268><div class="accordion-heading child"><a href="FriendsEndpoint.html">FriendsEndpoint</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="FriendsEndpoint.html#addFriend">addFriend</a></li><li data-type='method'><a href="FriendsEndpoint.html#getFriendsForAlias">getFriendsForAlias</a></li><li data-type='method'><a href="FriendsEndpoint.html#removeFriend">removeFriend</a></li></ul></li><li class="accordion-list" id=""><a href="Message.html">Message</a></li><li class="accordion collapsed child" id=5035404><div class="accordion-heading child"><a href="MessagesEndpoint.html">MessagesEndpoint</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="MessagesEndpoint.html#deleteMessage">deleteMessage</a></li><li data-type='method'><a href="MessagesEndpoint.html#getMessage">getMessage</a></li><li data-type='method'><a href="MessagesEndpoint.html#getMessagesForAlias">getMessagesForAlias</a></li><li data-type='method'><a href="MessagesEndpoint.html#sendMessage">sendMessage</a></li><li data-type='method'><a href="MessagesEndpoint.html#updateMessage">updateMessage</a></li></ul></li><li class="accordion-list" id=""><a href="module.exports.html">exports</a></li><li class="accordion-list" id=""><a href="PrivatePayload.html">PrivatePayload</a></li><li class="accordion collapsed child" id=9656080><div class="accordion-heading child"><a href="PrivatePayloadsEndpoint.html">PrivatePayloadsEndpoint</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="PrivatePayloadsEndpoint.html#createPayload">createPayload</a></li><li data-type='method'><a href="PrivatePayloadsEndpoint.html#deletePayload">deletePayload</a></li><li data-type='method'><a href="PrivatePayloadsEndpoint.html#getPayload">getPayload</a></li><li data-type='method'><a href="PrivatePayloadsEndpoint.html#updatePayload">updatePayload</a></li></ul></li><li class="accordion collapsed child" id=5683950><div class="accordion-heading child"><a href="WebSocketEndpoint.html">WebSocketEndpoint</a><svg><use xlink:href="#down-icon"></use></svg></div><ul class='methods accordion-content'><li data-type='method'><a href="WebSocketEndpoint.html#openWebSocketFor">openWebSocketFor</a></li></ul></li></ul> </div><div class="accordion collapsed" id="16246" > <h3 class="accordion-heading">Events<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="global.html#event:message">message</a></li><li class="accordion-list" id=""><a href="global.html#event:messagedelete">messagedelete</a></li><li class="accordion-list" id=""><a href="global.html#event:messageupdate">messageupdate</a></li></ul> </div><div class="accordion collapsed" id="7830578" > <h3 class="accordion-heading">Global<svg><use xlink:href="#down-icon"></use></svg></h3><ul class="accordion-content"><li class="accordion-list" id=""><a href="global.html#createAlias">createAlias</a></li><li class="accordion-list" id=""><a href="global.html#CreateDefaultRequestInitOptions">CreateDefaultRequestInitOptions</a></li><li class="accordion-list" id=""><a href="global.html#createHeadersFromObject">createHeadersFromObject</a></li><li class="accordion-list" id=""><a href="global.html#createJSONEncodedBody">createJSONEncodedBody</a></li><li class="accordion-list" id=""><a href="global.html#createJSONEncodedHeaders">createJSONEncodedHeaders</a></li><li class="accordion-list" id=""><a href="global.html#deleteAlias">deleteAlias</a></li><li class="accordion-list" id=""><a href="global.html#getAlias">getAlias</a></li><li class="accordion-list" id=""><a href="global.html#getAliasesForAccount">getAliasesForAccount</a></li><li class="accordion-list" id=""><a href="global.html#getErrorFromResponse">getErrorFromResponse</a></li><li class="accordion-list" id=""><a href="global.html#messageEventDetails">messageEventDetails</a></li><li class="accordion-list" id=""><a href="global.html#request">request</a></li><li class="accordion-list" id=""><a href="global.html#updateAlias">updateAlias</a></li></ul> </div>
      

    </nav>
    <div class="navbar-ham" id="navbar-ham">
      <div>
        <div class="first"></div>
        <div class="second"></div>
        <div class="third"></div>
      </div>
    </div>

    <div id="main" class="main-content">
      
      <h1 id='page-title' class="page-title">
        Client.js
      </h1>
      

      



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import ClientStore from "./ClientStore.js";
import Account from "./Account.js";
import Alias from "./Alias.js";
import Message from "./Message.js";
import PrivatePayload from "./PrivatePayload.js";

import WebSocketEndpoint from "./WebSocketEndpoint.js";
import AuthEndpoint from "./AuthEndpoint.js";
import AliasesEndpoint from "./AliasesEndpoint.js";
import MessagesEndpoint from "./MessagesEndpoint.js";
import PrivatePayloadsEndpoint from "./PrivatePayloadsEndpoint.js";
import FriendsEndpoint from "./FriendsEndpoint.js";

/**
 * autherror: detail is {message, aliasName}
 */

/**
 * Object passed to details on CustomEvents about messages fired by the Client.
 * @typedef {object} messageEventDetails
 * @property {string} messageId the id of the message the event is referring to
 * @property {string} aliasName the alias the event is associated with.
 */

/**
 * Delete Message Event. Called when a message is deleted.
 *
 * When a message is deleted it no longer exists on the server so you cannot call
 * [getMessageById]{@link Client#getMessageById} to get information about a deleted message.
 * @event messagedelete
 * @type {CustomEvent}
 * @property {messageEventDetails} detail the detail contains a messageEventDetails with the id and alias name of the message which was deleted.
 */

/**
 * Update Message Event
 *
 * Called when a message is updated. For example if the payload changes. Use
 * [getMessageById]{@link Client#getMessageById} to get information about the updatedMessage such as the
 * new payload.
 * @event messageupdate
 * @type {CustomEvent}
 * @property {messageEventDetails} detail the detail contains a messageEventDetails with the id and alias name of the message which was updated.
 */

/**
 * New Message Event
 *
 * Called when a new message is available. Call [getMessageById]{@link Client#getMessageById} to get
 * information about the new message.
 * @event message
 * @type {CustomEvent}
 * @property {messageEventDetails} detail the detail contains a messageEventDetails with the id and alias name of the message which was created.
 */

/**
 * The Client is the interface for interacting with the ChatServer.
 * @fires messagedelete
 * @fires messageupdate
 * @fires message
 */
export default class Client extends EventTarget {
  /**
   * Client constructor.
   * @param {string} host see [ClientStore's host property]{@link ClientStore#host}
   */
  constructor(host) {
    super();
    /**
     * A reference to the [ClientStore]{@link ClientStore} which contains global state of the chat application.
     * @type {ClientStore}
     */
    this.store = new ClientStore(host);

     /**
      * Helper class for authorization routes.
      * @type {AuthEndpoint}
      */
     this.auth = new AuthEndpoint(this.store);

     /**
      * Helper class for alias routes.
      * @type {AliasesEndpoint}
      */
     this.aliases = new AliasesEndpoint(this.store);

     /**
      * Helper class for message routes.
      * @type {MessagesEndpoint}
      */
     this.messages = new MessagesEndpoint(this.store);

     /**
      * Helper class for private payload routes.
      * @type {PrivatePayloadsEndpoint}
      */
     this.privatePayloads = new PrivatePayloadsEndpoint(this.store);

     /**
      * Helper class for friends routes.
      * @type {FriendsEndpoint}
      */
     this.friends = new FriendsEndpoint(this.store);

     this.webSocket = new WebSocketEndpoint(this.store);

    for (let event of ["message", "messageupdate", "messagedelete", "autherror"]) {
      this.webSocket.addEventListener(event, evt => this.dispatchEvent(evt));
    }
  }

  /**
   * Sign up for a new account with a single initial alias.
   * @param {string} alias The name of the initial alias if signup is successful.
   * @param {string} email The email address associated with the account.
   * @param {string} password The password associated with the account.
   * @returns {Promise&lt;{message: string}>} A validation message
   */
  signup(alias, email, password) {
    return this.auth.signup(alias, email, password);
  }

  /**
   * Login to an existing account.
   * @param {string} email The email address associated with the account.
   * @param {string} password The password associated with the account.
   * @returns {Promise&lt;Account>} Upon success returns the account which was logged in.
   */
  async login(email, password) {
    let response = await this.auth.login(email, password);
    this.dispatchEvent(new CustomEvent("login", { detail: response }));
    return response;
  }

  /**
   * Logout of an existing account
   */
  logout() {
    this.dispatchEvent(new CustomEvent("logout"));
    return this.auth.logout();
  }

  /**
   * Check if the user is currently logged in
   */
  isLoggedIn() {
    return this.auth.isLoggedIn();
  }

  /**
   * Get all the messages for the passed in alias
   *
   * Note the currently logged in account must own the alias associated with the aliasName.
   * @param {string} aliasName the name of the alias to get messages for.
   * @param {string[]} [interlocutors] an optional list of the senders and recipients of the messages.
   * @param {Date} [sinceTime] an optional date to limit the request by. only receive messages since this date.
   * @returns {Promise&lt;Message[]>} a list of messages which pass the filters.
   */
  getMessagesForAlias(aliasName, interlocutors, sinceTime) {
    return this.messages.getMessagesForAlias(aliasName, interlocutors, sinceTime);
  }

  /**
   * Get a message which has the passed in messageId, and was sent or received by the passed in aliasName.
   *
   * Note the currently logged in account must own the alias associated with the aliasName.
   * @param {string} aliasName the name of the alias which sent or received the message.
   * @param {string} messageId the id of the message to get.
   * @returns {Promise&lt;Message>} The model of the message with the associated id.
   */
  getMessageById(aliasName, messageId) {
    return this.messages.getMessage(aliasName, messageId);
  }

  /**
   * Send a message from the passed in alias to the passed in recipients with the passed in payload.
   *
   * Note the currently logged in account must own the alias associated with the aliasName.
   * @param {string} aliasName the name of the alias which will send the message.
   * @param {string[]} recipientNames a list of recipients of the message.
   * @param {string} payload the payload associated with the message.
   * @returns {Promise&lt;Message>} The model of the sent message.
   */
  sendMessage(aliasName, recipientNames, payload) {
    return this.messages.sendMessage(aliasName, recipientNames, payload);
  }

  /**
   * Update a message with the passed in messageId which was sent by the passed in aliasName.
   * @param {string} aliasName the name of the alias which sent the message.
   * @param {string} messageId the id associated with the message.
   * @param {string} payload the new payload for the message.
   * @returns {Promise&lt;Message>} The model of the updated message.
   */
  updateMessage(aliasName, messageId, payload) {
    return this.messages.updateMessage(aliasName, messageId, payload);
  }

  /**
   * Delete a message with the passed in messageId which was sent by the passed in aliasName.
   * @param {string} aliasName the name of the alias which sent the message.
   * @param {string} messageId the id associated with the message.
   * @returns {Promise&lt;any>} a validation message.
   */
  deleteMessage(aliasName, messageId) {
    return this.messages.deleteMessage(aliasName, messageId);
  }

  /**
   * Get all the aliases for the currently logged in account.
   * @returns {Promise&lt;Alias[]>} An array of Alias models.
   */
  async getAliasesForAccount() {
    let aliases = await this.aliases.getAliasesForAccount();

    for (let alias of aliases) {
      await this.webSocket.openWebSocketFor(alias.name);
    }

    return aliases;
  }

  /**
   * Get an alias by its name
   * @param {string} aliasName the name of the alias to get
   * @returns {Promise&lt;Alias>} The Alias model associated with the passed in name
   */
  getAlias(aliasName) {
    return this.aliases.getAlias(aliasName);
  }

  /**
   * Create a new alias with the passed in aliasName and payload.
   * @param {string} aliasName the name of the new alias
   * @param {string} payload the payload on the new alias.
   * @returns {Promise&lt;Alias>} The Alias model of the newly created alias.
   */
  createAlias(aliasName, payload) {
    return this.aliases.createAlias(aliasName, payload);
  }

  /**
   * Update an existing alias.
   * @param {Alias} alias the model of the alias to update
   * @param {string} [name] the optional new name for the alias
   * @param {string} [payload] the optional new payload for the alias
   * @returns {Promise&lt;Alias>} The Alias model of the newly updated alias.
   */
  updateAlias(alias, name, payload) {
    return this.aliases.updateAlias(alias, name, payload);
  }

  /**
   * Delete the alias associated with the passed in alias name.
   * @param {string} aliasName the name of the alias to delete.
   * @returns {Promise&lt;any>} A validation message.
   */
  deleteAlias(aliasName) {
    return this.aliases.deleteAlias(aliasName);
  }

  /**
   * Create a new private payload for the passed in entity, private to the passed in alias.
   * @param {string} aliasName the name of the alias which is creating the payload.
   * @param {string} entityId the [id]{@link BaseModel#id} of the entity ({@link Message}, {@link Alias}, or {@link Account}) the payload is attached to.
   * @param {string} payload the payload to attach to the entity associated with the passed in entityId, private to the alias associated with the passed in alias name.
   * @returns {Promise&lt;PrivatePayload>} the new private payload.
   */
  createPrivatePayload(aliasName, entityId, payload) {
    return this.privatePayloads.createPayload(aliasName, entityId, payload);
  }

  /**
   * Get the private payload associated with the passed in alias and entity.
   * @param {string} aliasName the name of the alias associated with the payload to get.
   * @param {string} entityId the [id]{@link BaseModel#id} of the entity ({@link Message}, {@link Alias}, or {@link Account}) the payload to get is attached to.
   * @returns {Promise&lt;PrivatePayload>} the private payload associated with the passed in alias and entity.
   */
  getPrivatePayload(aliasName, entityId) {
    return this.privatePayloads.getPayload(aliasName, entityId);
  }

  /**
   * Update the private payload associated with the passed in alias and entity.
   * @param {string} aliasName the name of the alias associated with the payload to update.
   * @param {string} entityId the [id]{@link BaseModel#id} of the entity ({@link Message}, {@link Alias}, or {@link Account}) the payload to update is attached to.
   * @param {string} newPayload the new private payload.
   * @returns {Promise&lt;PrivatePayload>} the updated private payload.
   */
  updatePrivatePayload(aliasName, entityId, newPayload) {
    return this.privatePayloads.updatePayload(
      aliasName,
      entityId,
      newPayload
    );
  }

  /**
   * Delete the private payload associated with the passed in alias and entity.
   * @param {string} aliasName the name of the alias associated with the payload to delete.
   * @param {string} entityId the [id]{@link BaseModel#id} of the entity ({@link Message}, {@link Alias}, or {@link Account}) the payload to delete is attached to.
   * @returns {Promise&lt;any>} A validation message.
   */
  deletePrivatePayload(aliasName, entityId) {
    return this.privatePayloads.deletePayload(aliasName, entityId);
  }

  /**
   * Get all the friends of the passed in alias.
   * @param {string} ownAlias the name of the alias whose friends will be retrieved.
   * @returns {Promise&lt;Alias[]>} an array of aliases. These are the passed in alias's friends.
   */
  getFriendsForAlias(ownAlias) {
    return this.friends.getFriendsForAlias(ownAlias);
  }

  /**
   * Add a new friend to the friend list of the passed in alias.
   * @param {string} ownAlias the name of the alias adding a friend.
   * @param {string} newFriendAlias the name of the alias which is going to be added to ownAlias's friend list.
   * @returns {Promise&lt;any>} a validation message.
   */
  addFriend(ownAlias, newFriendAlias) {
    return this.friends.addFriend(ownAlias, newFriendAlias);
  }

  /**
   * Remove a friend from the friend list of the passed in alias.
   * @param {string} ownAlias the name of the alias removing a friend.
   * @param {string} prevFriendAlias the name of the alias which is going to be removed from ownAlias's friend list.
   * @returns {Promise&lt;any>} a validation message.
   */
  removeFriend(ownAlias, prevFriendAlias) {
    return this.friends.removeFriend(ownAlias, prevFriendAlias);
  }

  /**
   * Given an array of Messages group the messages by unique groups of sender
   * and recipient aliases. For example if Alice sends Bob a message and Bob
   * sends Alice a message both of those messages are in the same group since
   * the set of sender and recipient aliases contains {Alice, Bob} for each
   * message.
   *
   * @param {Message[]} messages the messages to group by unique groups of senders and recipients.
   * @returns {Message[][]} an array where each element is a set of messages with a unique set of senders and recipients.
   */
  groupMessagesByUniqueRecipients(messages) {
    const msgKeyedByInterlocutorSets = messages.reduce(
      (
        r,
        v,
        i,
        a,
        k = [...new Set([v.sender.id, ...v.recipients.map((c) => c.id)])]
          .sort()
          .join("")
      ) => ((r[k] || (r[k] = [])).push(v), r),
      {}
    );

    return Object.values(msgKeyedByInterlocutorSets);
  }
}
</code></pre>
        </article>
    </section>




    </div>

    <footer class="footer" id="footer">
      
    </footer>

    <script src="scripts/third-party/prettify.js"></script>
    <script src="scripts/third-party/lang-css.js"></script>
    <script type="text/javascript" src="scripts/misc.js"></script>

    <script>prettyPrint();</script>
    <script src="scripts/linenumber.js"></script>
    <script src="scripts/fix-code-block.js"></script>
    <script src="scripts/fix-navbar.js"></script>
    
      <script src="scripts/search.js"></script>
      <script src="scripts/third-party/fuse.js"></script>
      <script>
        var list = [{"title":"Account","link":"<a href=\"Account.html\">Account</a>"},{"title":"Alias","link":"<a href=\"Alias.html\">Alias</a>"},{"title":"AuthEndpoint","link":"<a href=\"AuthEndpoint.html\">AuthEndpoint</a>"},{"title":"AuthEndpoint#isLoggedIn","link":"<a href=\"AuthEndpoint.html#isLoggedIn\">AuthEndpoint &rtrif; isLoggedIn</a>"},{"title":"AuthEndpoint#login","link":"<a href=\"AuthEndpoint.html#login\">AuthEndpoint &rtrif; login</a>"},{"title":"AuthEndpoint#logout","link":"<a href=\"AuthEndpoint.html#logout\">AuthEndpoint &rtrif; logout</a>"},{"title":"AuthEndpoint#signup","link":"<a href=\"AuthEndpoint.html#signup\">AuthEndpoint &rtrif; signup</a>"},{"title":"BaseModel","link":"<a href=\"BaseModel.html\">BaseModel</a>"},{"title":"Client","link":"<a href=\"Client.html\">Client</a>"},{"title":"Client#addFriend","link":"<a href=\"Client.html#addFriend\">Client &rtrif; addFriend</a>"},{"title":"Client#createAlias","link":"<a href=\"Client.html#createAlias\">Client &rtrif; createAlias</a>"},{"title":"Client#createPrivatePayload","link":"<a href=\"Client.html#createPrivatePayload\">Client &rtrif; createPrivatePayload</a>"},{"title":"Client#deleteAlias","link":"<a href=\"Client.html#deleteAlias\">Client &rtrif; deleteAlias</a>"},{"title":"Client#deleteMessage","link":"<a href=\"Client.html#deleteMessage\">Client &rtrif; deleteMessage</a>"},{"title":"Client#deletePrivatePayload","link":"<a href=\"Client.html#deletePrivatePayload\">Client &rtrif; deletePrivatePayload</a>"},{"title":"Client#getAlias","link":"<a href=\"Client.html#getAlias\">Client &rtrif; getAlias</a>"},{"title":"Client#getAliasesForAccount","link":"<a href=\"Client.html#getAliasesForAccount\">Client &rtrif; getAliasesForAccount</a>"},{"title":"Client#getFriendsForAlias","link":"<a href=\"Client.html#getFriendsForAlias\">Client &rtrif; getFriendsForAlias</a>"},{"title":"Client#getMessageById","link":"<a href=\"Client.html#getMessageById\">Client &rtrif; getMessageById</a>"},{"title":"Client#getMessagesForAlias","link":"<a href=\"Client.html#getMessagesForAlias\">Client &rtrif; getMessagesForAlias</a>"},{"title":"Client#getPrivatePayload","link":"<a href=\"Client.html#getPrivatePayload\">Client &rtrif; getPrivatePayload</a>"},{"title":"Client#groupMessagesByUniqueRecipients","link":"<a href=\"Client.html#groupMessagesByUniqueRecipients\">Client &rtrif; groupMessagesByUniqueRecipients</a>"},{"title":"Client#isLoggedIn","link":"<a href=\"Client.html#isLoggedIn\">Client &rtrif; isLoggedIn</a>"},{"title":"Client#login","link":"<a href=\"Client.html#login\">Client &rtrif; login</a>"},{"title":"Client#logout","link":"<a href=\"Client.html#logout\">Client &rtrif; logout</a>"},{"title":"Client#removeFriend","link":"<a href=\"Client.html#removeFriend\">Client &rtrif; removeFriend</a>"},{"title":"Client#sendMessage","link":"<a href=\"Client.html#sendMessage\">Client &rtrif; sendMessage</a>"},{"title":"Client#signup","link":"<a href=\"Client.html#signup\">Client &rtrif; signup</a>"},{"title":"Client#updateAlias","link":"<a href=\"Client.html#updateAlias\">Client &rtrif; updateAlias</a>"},{"title":"Client#updateMessage","link":"<a href=\"Client.html#updateMessage\">Client &rtrif; updateMessage</a>"},{"title":"Client#updatePrivatePayload","link":"<a href=\"Client.html#updatePrivatePayload\">Client &rtrif; updatePrivatePayload</a>"},{"title":"ClientStore","link":"<a href=\"ClientStore.html\">ClientStore</a>"},{"title":"FriendsEndpoint","link":"<a href=\"FriendsEndpoint.html\">FriendsEndpoint</a>"},{"title":"FriendsEndpoint#addFriend","link":"<a href=\"FriendsEndpoint.html#addFriend\">FriendsEndpoint &rtrif; addFriend</a>"},{"title":"FriendsEndpoint#getFriendsForAlias","link":"<a href=\"FriendsEndpoint.html#getFriendsForAlias\">FriendsEndpoint &rtrif; getFriendsForAlias</a>"},{"title":"FriendsEndpoint#removeFriend","link":"<a href=\"FriendsEndpoint.html#removeFriend\">FriendsEndpoint &rtrif; removeFriend</a>"},{"title":"Message","link":"<a href=\"Message.html\">Message</a>"},{"title":"MessagesEndpoint","link":"<a href=\"MessagesEndpoint.html\">MessagesEndpoint</a>"},{"title":"MessagesEndpoint#deleteMessage","link":"<a href=\"MessagesEndpoint.html#deleteMessage\">MessagesEndpoint &rtrif; deleteMessage</a>"},{"title":"MessagesEndpoint#getMessage","link":"<a href=\"MessagesEndpoint.html#getMessage\">MessagesEndpoint &rtrif; getMessage</a>"},{"title":"MessagesEndpoint#getMessagesForAlias","link":"<a href=\"MessagesEndpoint.html#getMessagesForAlias\">MessagesEndpoint &rtrif; getMessagesForAlias</a>"},{"title":"MessagesEndpoint#sendMessage","link":"<a href=\"MessagesEndpoint.html#sendMessage\">MessagesEndpoint &rtrif; sendMessage</a>"},{"title":"MessagesEndpoint#updateMessage","link":"<a href=\"MessagesEndpoint.html#updateMessage\">MessagesEndpoint &rtrif; updateMessage</a>"},{"title":"exports","link":"<a href=\"module.exports.html\">exports</a>"},{"title":"PrivatePayload","link":"<a href=\"PrivatePayload.html\">PrivatePayload</a>"},{"title":"PrivatePayloadsEndpoint","link":"<a href=\"PrivatePayloadsEndpoint.html\">PrivatePayloadsEndpoint</a>"},{"title":"PrivatePayloadsEndpoint#createPayload","link":"<a href=\"PrivatePayloadsEndpoint.html#createPayload\">PrivatePayloadsEndpoint &rtrif; createPayload</a>"},{"title":"PrivatePayloadsEndpoint#deletePayload","link":"<a href=\"PrivatePayloadsEndpoint.html#deletePayload\">PrivatePayloadsEndpoint &rtrif; deletePayload</a>"},{"title":"PrivatePayloadsEndpoint#getPayload","link":"<a href=\"PrivatePayloadsEndpoint.html#getPayload\">PrivatePayloadsEndpoint &rtrif; getPayload</a>"},{"title":"PrivatePayloadsEndpoint#updatePayload","link":"<a href=\"PrivatePayloadsEndpoint.html#updatePayload\">PrivatePayloadsEndpoint &rtrif; updatePayload</a>"},{"title":"WebSocketEndpoint","link":"<a href=\"WebSocketEndpoint.html\">WebSocketEndpoint</a>"},{"title":"WebSocketEndpoint#openWebSocketFor","link":"<a href=\"WebSocketEndpoint.html#openWebSocketFor\">WebSocketEndpoint &rtrif; openWebSocketFor</a>"},{"title":"message","link":"<a href=\"global.html#event:message\">message</a>"},{"title":"messagedelete","link":"<a href=\"global.html#event:messagedelete\">messagedelete</a>"},{"title":"messageupdate","link":"<a href=\"global.html#event:messageupdate\">messageupdate</a>"},{"title":"createAlias","link":"<a href=\"global.html#createAlias\">createAlias</a>"},{"title":"CreateDefaultRequestInitOptions","link":"<a href=\"global.html#CreateDefaultRequestInitOptions\">CreateDefaultRequestInitOptions</a>"},{"title":"createHeadersFromObject","link":"<a href=\"global.html#createHeadersFromObject\">createHeadersFromObject</a>"},{"title":"createJSONEncodedBody","link":"<a href=\"global.html#createJSONEncodedBody\">createJSONEncodedBody</a>"},{"title":"createJSONEncodedHeaders","link":"<a href=\"global.html#createJSONEncodedHeaders\">createJSONEncodedHeaders</a>"},{"title":"deleteAlias","link":"<a href=\"global.html#deleteAlias\">deleteAlias</a>"},{"title":"getAlias","link":"<a href=\"global.html#getAlias\">getAlias</a>"},{"title":"getAliasesForAccount","link":"<a href=\"global.html#getAliasesForAccount\">getAliasesForAccount</a>"},{"title":"getErrorFromResponse","link":"<a href=\"global.html#getErrorFromResponse\">getErrorFromResponse</a>"},{"title":"messageEventDetails","link":"<a href=\"global.html#messageEventDetails\">messageEventDetails</a>"},{"title":"request","link":"<a href=\"global.html#request\">request</a>"},{"title":"updateAlias","link":"<a href=\"global.html#updateAlias\">updateAlias</a>"}];
        var options = 
          setupSearch(list, options)
      </script>
    

    

    

    


  </body>

</html>
